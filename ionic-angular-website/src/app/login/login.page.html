<ion-header id="ion-header">
  <ion-toolbar class="ion-top-bar">
    <div id="ion-toolbar-content">
      <img src="../../assets/icon/ViHaRa_icon.png" alt="ViHaRa Icon" />
      <ion-title>
        ViHaRa ChatBot
      </ion-title>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="content">
    <div class="form-container" [class.sign-up]="!isSignIn">
      <div class="form">
        <h2 *ngIf="isSignIn">Sign In</h2>
        <h2 *ngIf="!isSignIn">Sign Up</h2>
        <form *ngIf="isSignIn" (ngSubmit)="submitSignupForm()" name="sign-in" >
          <!-- Sign In Form -->
          <ion-input 
          fill="outline"
           labelPlacement="floating"
            label="Username/Email*" 
            type="text"
            ngModel
            #UsernameInput
            required
            autofocus
            [ngModelOptions]="{standalone: true}"
            />
            <ion-input  
            fill="outline" 
            labelPlacement="floating" 
            label="Password*" 
            type="password" 
            #signUpPasswordInput  
            clear-on-edit="false" 
            type="{{ showPassword ? 'text' : 'password' }}" 
            minlength="8"  
            error-text="Password must contain atleast 8 charecters"
            ngModel
            password
            required 
            [ngModelOptions]="{standalone: true}"
            >
              <ion-icon  name="{{ showPassword ? 'eye-off' : 'eye' }}" slot="end" (click)="togglePasswordVisibility()"></ion-icon>
            </ion-input>
          <!-- reCAPTCHA widget -->
          <div class="recaptcha-container" #recaptchaElement></div>
          <ion-button expand="block" [disabled]="buttonDisabled">Sign In</ion-button>
        </form>
        <form *ngIf="!isSignIn" (ngSubmit)="submitSignupForm()" name="sign-up" [formGroup]="signupForm">
          <!-- Sign Up Form -->
            <ion-input 
            fill="outline"
             labelPlacement="floating"
              label="Username*" 
              type="text"
              [value]="Username"
              (ionInput)="onInput($event)"
              [counter]="true"
              maxlength="35"
              minlength="4"
              ngModel
              [counterFormatter]="customCounterFormatter"
              #UsernameInput
              required
              autofocus
              [ngModelOptions]="{standalone: true}"
              />
            <ion-input  
            fill="outline" 
            labelPlacement="floating" 
            label="Email*" 
            type="email"
            helperText="Enter a valid email"
            error-text="Invalid email"
            ngModel 
            email
            required
            [ngModelOptions]="{standalone: true}"
             />
             <ion-input
             formControlName="password"
             type="{{ showPassword ? 'text' : 'password' }}"
             clear-on-edit="false"
             required
             fill="outline" labelPlacement="floating" 
             label="Password*"  
             minlength="8"
             >
             <ion-icon  name="{{ showPassword ? 'eye-off' : 'eye' }}" slot="end" (click)="togglePasswordVisibility()"></ion-icon>
            </ion-input>
            <div *ngIf="signupForm.controls['password'].touched && signupForm.controls['password'].invalid">
              <ion-text color="danger">Password must be at least 8 characters long.</ion-text>
            </div>
             <ion-input
               formControlName="confirmPassword"
               type="{{ showConfirmPassword ? 'text' : 'password' }}"
               clear-on-edit="false"
               fill="outline" labelPlacement="floating" 
               label="Confirm Password*"    
               required
               minlength="8"
               >
               <ion-icon name="{{ showConfirmPassword ? 'eye-off' : 'eye' }}" slot="end" (click)="toggleConfirmPasswordVisibility()"></ion-icon>  
              </ion-input>
              <div *ngIf="signupForm.controls['confirmPassword'].touched && signupForm.errors?.['passwordMismatch']">
               <ion-text color="danger">Passwords do not match.</ion-text>
             </div>
             <!-- reCAPTCHA widget -->
          <div class="recaptcha-container" #recaptchaElement></div>
          <ion-button expand="block" [disabled]="buttonDisabled">Sign Up</ion-button>
        </form>
        <div class="alt-text-container">
        <ion-text color="light" class="alt-text" *ngIf="isSignIn">Don't have an account?</ion-text>
        <ion-text color="light" class="alt-text" *ngIf="!isSignIn">Already have an account?</ion-text>
        <ion-button expand="block" fill="outline" (click)="toggleView()">
          {{ isSignIn ? 'Sign Up' : 'Sign In' }}
        </ion-button>
        </div>
      </div>
    </div>
  </div>
</ion-content>
<ion-footer collapse="fade">
  <ion-toolbar>
      <span> Â© 2023 ViHaRa ChatBot <sub>All Rights Reserved </sub></span>
    <br>
    <div id="credits">
    <span>Devloped by: <sub>Rajaraman S | Harinarayanan S G | Vignesh Ram Narayanan | Sharon Joe | Dhakshin A V</sub> </span>
    <br>
    <span>Under the Guidance of: <sub>Dr.V.S.Shankar Shriram | Dr.H.Anila Glory</sub> </span>
    </div>
  </ion-toolbar>
</ion-footer>