<ion-header id="ion-header">
  <ion-toolbar class="ion-top-bar">
    <div id="ion-toolbar-content">
      <img src="../../assets/icon/ViHaRa_icon.png" alt="ViHaRa Icon" />
      <ion-title>
        ViHaRa ChatBot
      </ion-title>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="content">
    <div class="form-container" [class.sign-up]="!isSignIn">
      <div class="form">
        <h2 *ngIf="isSignIn">Sign In</h2>
        <h2 *ngIf="!isSignIn">Sign Up</h2>
        <form *ngIf="isSignIn" (ngSubmit)="submitSignupForm()">
          <!-- Sign In Form -->
          <ion-input 
          fill="outline"
           labelPlacement="floating"
            label="Username/Email*" 
            type="text"
            ngModel
            #UsernameInput
            required
            autofocus
            />
            <ion-input  
            fill="outline" 
            labelPlacement="floating" 
            label="Password*" 
            type="password" 
            #signUpPasswordInput  
            clear-on-edit="false" 
            type="{{ showPassword ? 'text' : 'password' }}" 
            minlength="8"  
            error-text="Password must contain atleast 8 charecters"
            ngModel
            password
            required 
            >
              <ion-icon  name="{{ showPassword ? 'eye-off' : 'eye' }}" slot="end" (click)="togglePasswordVisibility()"></ion-icon>
            </ion-input>
          <!-- reCAPTCHA widget -->
          <div class="recaptcha-container" #recaptchaElement></div>
          <ion-button expand="block" [disabled]="buttonDisabled">Sign In</ion-button>
        </form>
        <form *ngIf="!isSignIn" (ngSubmit)="submitSignupForm()">
          <!-- Sign Up Form -->
            <ion-input 
            fill="outline"
             labelPlacement="floating"
              label="Username*" 
              type="text"
              [value]="Username"
              (ionInput)="onInput($event)"
              [counter]="true"
              maxlength="35"
              minlength="4"
              ngModel
              [counterFormatter]="customCounterFormatter"
              #UsernameInput
              required
              autofocus
              />
            <ion-input  
            fill="outline" 
            labelPlacement="floating" 
            label="Email*" 
            type="email"
            helperText="Enter a valid email"
            error-text="Invalid email"
            ngModel 
            email
            required
             />
            <ion-input  
            fill="outline" 
            labelPlacement="floating" 
            label="Password*" 
            type="password" 
            #signUpPasswordInput  
            clear-on-edit="false" 
            type="{{ showPassword ? 'text' : 'password' }}" 
            minlength="8"  
            error-text="Password must contain atleast 8 charecters"
            ngModel
            password
            required 
            >
              <ion-icon  name="{{ showPassword ? 'eye-off' : 'eye' }}" slot="end" (click)="togglePasswordVisibility()"></ion-icon>
            </ion-input>
            <ion-input 
            ngModel 
            confirmpassword 
            required 
            minlength="8" 
            clear-on-edit="false"  
            error-text="Password didn't match" 
            fill="outline" labelPlacement="floating" 
            label="Confirm Password*" 
            type="password" 
            #confirmPasswordInput 
            type="{{ showConfirmPassword ? 'text' : 'password' }}" 
            >            
              <ion-icon name="{{ showConfirmPassword ? 'eye-off' : 'eye' }}" slot="end" (click)="toggleConfirmPasswordVisibility()"></ion-icon>  
            </ion-input>
          <!-- reCAPTCHA widget -->
          <div class="recaptcha-container" #recaptchaElement></div>
          <ion-button expand="block" [disabled]="buttonDisabled">Sign Up</ion-button>
        </form>
        <div class="alt-text-container">
        <ion-text color="light" class="alt-text" *ngIf="isSignIn">Don't have an account?</ion-text>
        <ion-text color="light" class="alt-text" *ngIf="!isSignIn">Already have an account?</ion-text>
        <ion-button expand="block" fill="outline" (click)="toggleView()">
          {{ isSignIn ? 'Sign Up' : 'Sign In' }}
        </ion-button>
        </div>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer collapse="fade">
  <ion-toolbar>
    <div class="footer-content">
      <span>Â© 2023 ViHaRa ChatBot <sub>All Rights Reserved</sub></span>
      <br>
      <span>Developed by: <sub>Rajaraman S | Harinarayanan S G | Vignesh Ram Narayanan | Sharon Joe | Dhakshin A V</sub></span>
      <br>
      <span>Under the Guidance of: <sub>Dr.V.S.Shankar Shriram | Dr.H.Anila Glory</sub></span>
    </div>
  </ion-toolbar>
</ion-footer>
